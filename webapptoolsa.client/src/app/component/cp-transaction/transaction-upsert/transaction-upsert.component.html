<div class="container">
  <button mat-raised-button color="primary" class="me-3" (click)="headerNew()"><mat-icon>add</mat-icon>Agregar</button>
  <button mat-raised-button color="primary" class="me-3" (click)="headerApply()"><mat-icon>add</mat-icon>Aplicar</button>
  <button mat-raised-button color="primary" class="me-3" (click)="headerAbort()"><mat-icon>add</mat-icon>Anular</button>
</div>


<div class="container">
  <div class="row g-3">
    <div class="col-12 col-md-6">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Rango de Fecha</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate placeholder="Fecha Inicio" [(ngModel)]="obj.dateStart">
          <input matEndDate placeholder="Fecha Entrega" [(ngModel)]="obj.dateEnd">
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>

    </div>
    <div class="col-12 col-md-6">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Tipo Movimiento</mat-label>
        <mat-select [(ngModel)]="obj.idType">
          <mat-option>
            <input matInput placeholder="Search..." (click)="$event.stopPropagation()" [(ngModel)]="searchType"
                   (ngModelChange)="filterTypeTransaction($event)" autocomplete="off" />
          </mat-option>
          <mat-option *ngFor="let b of lstTmpTypeTransaction()" [value]="b.id">
            {{ b.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

    </div>

    <div class="col-12 col-md-6">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Sucursal Origen</mat-label>
        <mat-select>
          <mat-option>
            <input matInput placeholder="Search..." (click)="$event.stopPropagation()" [(ngModel)]="searchWarehouseO"
                   autocomplete="off" />
          </mat-option>
          <mat-option *ngFor="let b of lstTmpWarehouseO()" [value]="b.id">
            {{ b.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

    </div>

    <div class="col-12 col-md-6">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Sucursal Destino</mat-label>
        <mat-select>
          <mat-option>
            <input matInput placeholder="Search..." (click)="$event.stopPropagation()" [(ngModel)]="searchWarehouseD"
                   autocomplete="off" />
          </mat-option>
          <mat-option *ngFor="let b of lstTmpWarehouseD()" [value]="b.id">
            {{ b.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

    </div>

    <div class="col-12 ">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Projecto</mat-label>
        <input matInput [(ngModel)]="obj.idProject">
      </mat-form-field>

    </div>
    <div class="col-12">

      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Notas</mat-label>
        <textarea matInput rows="4" [(ngModel)]="obj.notes"></textarea>
      </mat-form-field>


    </div>

  </div>

  <button mat-raised-button color="primary" class="me-3" (click)="detailNew()"><mat-icon>add</mat-icon>Agregar</button>
  <button mat-raised-button color="primary" class="me-3" (click)="detailEdit()"><mat-icon>add</mat-icon>Editar</button>
  <button mat-raised-button color="primary" class="me-3" (click)="detailRemove()"><mat-icon>add</mat-icon>Eliminar</button>

  <div class="mt-3">
    <table mat-table [dataSource]="dataSource">

      <ng-container matColumnDef="inv_fml_id">
        <th mat-header-cell *matHeaderCellDef>Id Detalle</th>
        <td mat-cell *matCellDef="let element; let i = index">
          <div *ngIf="!isEditingRow(i); else editId">
            {{ element.inv_fml_id }}
          </div>
          <ng-template #editId>
            <div class="input-group">
              <input type="text" [(ngModel)]="element.inv_fml_id" (click)="openFamilyDialog()" class="form-control" />

            </div>
          </ng-template>
        </td>
      </ng-container>


      <ng-container matColumnDef="descripcion">
        <th mat-header-cell *matHeaderCellDef> Descripci√≥n </th>
        <td mat-cell *matCellDef="let element; let i=index">
          <div *ngIf="!isEditingRow(i); else editDesc">
            {{ element.descripcion }}

          </div>
          <ng-template #editDesc>
            <input type="text" [(ngModel)]="element.descripcion" class="form-control" />
          </ng-template>

        </td>
      </ng-container>

      <ng-container matColumnDef="descripcion">
        <th mat-header-cell *matHeaderCellDef> Estado </th>
        <td mat-cell *matCellDef="let element; let i=index">
          <div *ngIf="!isEditingRow(i); else editDesc">
            {{ element.descripcion }}

          </div>
          <ng-template #editDesc>
            <input type="text" [(ngModel)]="element.descripcion" class="form-control" />
          </ng-template>

        </td>
      </ng-container>


      <ng-container matColumnDef="cantidad">
        <th mat-header-cell *matHeaderCellDef> Cantidad </th>
        <td mat-cell *matCellDef="let element; let i=index">
          <div *ngIf="!isEditingRow(i); else editCant">
            {{ element.cantidad }}
          </div>
          <ng-template #editCant>
            <input type="text" [(ngModel)]="element.cantidad" class="form-control" />
          </ng-template>

        </td>
      </ng-container>



      <tr mat-header-row *matHeaderRowDef="columnsName"></tr>
      <tr mat-row *matRowDef="let row; columns:columnsName;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 20]"></mat-paginator>
  </div>


</div>


